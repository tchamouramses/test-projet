<div class="row col-md-12">
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <h4>
                        Formulaire d'Extraction
                    </h4>
                </div>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="type" class="control-label">Type Fichier</label>
                    <select id="type" class="form-control" [(ngModel)]="typeFichier">
                        <option value="IMG">Image</option>
                        <option value="PDF">Pdf</option>
                    </select>
                </div>
                <div class="form-group mt-2">
                    <label for="file" class="control-label">Choix du Fichier</label>
                    <input class="form-control" type="file" id="upload-doc" [accept]="accept"
                        (change)="openCropModal($event)">
                </div>
                <div class="progress mt-2">
                    <div class=" progress-bar" role="progressbar" [style]="width" aria-valuenow="0" aria-valuemin="0"
                        aria-valuemax="100">
                        {{ progressNumber + '%' }}
                    </div>
                </div>
                <div class="mt-2" *ngIf="error">
                    <span style="color: red;">
                        {{ error }}
                    </span>
                    <input type="checkbox" id="save" [(ngModel)]="saveModel">
                    <label for="save">enregistrer le model</label>
                </div>
                <div class="col-md-4 mt-2" *ngIf="!extractText">
                    <button class="btn btn-primary" [disabled]="!selectedFile || extractLoading"
                        (click)="extraction()"><span class="spinner-border"
                            *ngIf="extractLoading"></span>Extraire</button>
                </div>
                <div class="col-md-4 mt-2" *ngIf="extractText">
                    <button class="btn btn-success" (click)="save()" [disabled]="isLoading">
                        <span class="spinner-border" *ngIf="isLoading"></span> Sauvegarder
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <h4>
                        Données Extraites
                    </h4>
                </div>
            </div>
            <div class="card-body">
                <table class="table table-responsive table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>nom_medecin</th>
                            <th>tarif</th>
                            <th>nom_hopital</th>
                            <th>contenue</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of datas">
                            <td>{{ item?.model?.nom }}</td>
                            <td>{{ item?.nom_medecin }}</td>
                            <td>{{ item?.tarif }}</td>
                            <td>{{ item?.nom_hopital }}</td>
                            <td>{{ item?.contenue }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<br>
<p>
    {{ extractText }}
</p>
<div class="mt-4 button-container">
    <div id="button-red-container" *ngIf="pdfSrc">
        <button class="btn btn-secondary" (click)="cropPdfToImage()">Redimensionner</button>
    </div>
    <div id="buttons-group" *ngIf="isCropImage">
        <button class="btn btn-warning" (click)="zoomIn()">Z (-)</button>
        <button class="btn btn-warning" (click)="zoomOut()">Z (+)</button>
        <button class="btn btn-primary" (click)="onRotate()">Rotate (90°)</button>
        <button class="btn btn-success" (click)="crop()">Valider</button>
    </div>
</div>
<div class="row mt-4">
    <div class="col-md-6">
        <div class="pdf-container">
            <pdf-viewer [src]="pdfSrc" [render-text]="true" [show-all]="true" [original-size]="false"
                [autoresize]="true" [fit-to-page]="false" (after-load-complete)="afterLoadComplete($event)"
                style="width: 100%; height: 750px;">
            </pdf-viewer>
        </div>
    </div>
    <div class="col-md-6" *ngIf="!validateCropping">
        <img alt="" id="cropper-img" height="100">
    </div>
    <div class="col-md-6" *ngIf="validateCropping">
        <img alt="" [src]="imageFromPdf" style="width: 100%; height: auto;">
    </div>
</div>